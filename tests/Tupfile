include_rules

CXXFLAGS += -std=c++0x -I$(TUP_CWD)

# Compile Google test library
: foreach gtest/src/gtest_main.cc gtest/src/gtest-all.cc |> !cxx |>
: gtest_main.o gtest-all.o |> !ar |> libgtest_main.a

# Compile individual tests
export PKG_CONFIG_PATH
CXXFLAGS += -I..
CXXFLAGS_test_mer_pos_hash += $(JELLYFISH_CFLAGS)
LDFLAGS_test_mer_pos_hash += $(JELLYFISH_LIBS)
LDFLAGS += -pthread -L$(TUP_CWD) -lgtest_main
: foreach test_lis.cc test_lf_forward_list.cc test_mer_pos_hash.cc | libgtest_main.a |> !cxxld |> {all_tests}
: foreach {all_tests} |> ./%f > %o |> %f.log

